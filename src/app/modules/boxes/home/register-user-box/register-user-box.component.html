<div class="row">
  <div class="col-sm-12 col-sm-12">
    <div class="card card-custom example example-compact gutter-b">
      <div class="card-header d-flex">
        <div class="w-75">
          <div class="card-title d-block pb-2">
            <h3 class="card-label pt-4 pb-4">Registrar usuario</h3>
            <h6 style="font-size: small; color: rgb(163, 163, 163)">
              En esta sección podrás registrar un usuario a un evento
            </h6>
          </div>
        </div>
        <div class="card-toolbar">
          <div class="example-tools justify-content-center">
            <img src="assets/media/svg/icons/Shopping/Ticket.svg" alt="" />
          </div>
        </div>
      </div>
      <div class="card-body">
        <form [formGroup]="register_user" (ngSubmit)="createUser()">
          <!-- <h4 class="h4">Tipo de Registro</h4>
          <div class="mt-5">
            <mat-radio-group aria-label="Select an option" formControlName="register_type">
              <mat-radio-button [value]="1">Nacional (Colombia)</mat-radio-button>
              <mat-radio-button [value]="2">Internacional</mat-radio-button>
            </mat-radio-group>
          </div> -->

          <div class="row" formGroupName="event_information">
            <div class="col-12">
              <h4 class="h4 mt-6">Información del evento</h4>
            </div>

            <div class="col-sm-6 mt-6">
              <mat-form-field appearance="fill" class="example-full-width">
                <mat-label>Evento*</mat-label>
                <mat-select type="select" formControlName="event">
                  <mat-option *ngFor="let event of events" [value]="event">{{
                    event.name
                  }}</mat-option>
                </mat-select>
              </mat-form-field>
            </div>
            <div class="col-sm-6 mt-6">
              <mat-form-field appearance="fill" class="example-full-width">
                <mat-label>Corte*</mat-label>
                <mat-select type="select" formControlName="financial_cut">
                  <mat-option
                    *ngFor="let cut of financial_cuts"
                    [value]="cut"
                    >{{ cut.name }}</mat-option
                  >
                </mat-select>
              </mat-form-field>
            </div>
          </div>

          <h4 class="h4 mt-6">Información Personal</h4>
          <div formGroupName="assistant">
            <div class="row mt-6">
              <div class="col-sm-6 col-12">
                <mat-form-field appearance="fill" class="example-full-width">
                  <mat-label>Pais*</mat-label>
                  <mat-select
                    type="select"
                    formControlName="country"
                    [disabled]="find_user"
                  >
                    <mat-option
                      (click)="resetMinisterialInfo(true)"
                      *ngFor="let country of countries"
                      [value]="country.name"
                      >{{ country.name }}</mat-option
                    >
                  </mat-select>
                </mat-form-field>
              </div>

              <div class="col-sm-6 col-12">
                <mat-form-field class="example-full-width" appearance="fill">
                  <mat-label>Genero*</mat-label>
                  <mat-select type="select" formControlName="gender">
                    <mat-option value="F"> Femenino </mat-option>
                    <mat-option value="M"> Masculino </mat-option>
                  </mat-select>
                </mat-form-field>
              </div>
            </div>
            <div
              class="row"
              *ngIf="
                assistant_value?.country?.toString().toUpperCase() == 'COLOMBIA'
              "
            >
              <div class="col-sm-6 col-12">
                <mat-form-field appearance="fill" class="example-full-width">
                  <mat-label>Tipo de documento* </mat-label>
                  <mat-select type="select" formControlName="document_type">
                    <mat-option value="CC"> CC </mat-option>
                    <mat-option value="CC"> TI </mat-option>
                    <mat-option value="CE"> CE </mat-option>
                  </mat-select>
                </mat-form-field>
              </div>
              <div class="col-sm-6 col-12">
                <mat-form-field class="example-full-width" appearance="fill">
                  <mat-label>Documento*</mat-label>
                  <input
                    matInput
                    autocomplete="off"
                    formControlName="identification"
                    (keypress)="validateNumber($event)"
                    (keydown.Tab)="searchUser(true)"
                    (keyup.enter)="searchUser(true)"
                  />
                  <button
                    *ngIf="assistant_value.identification"
                    type="button"
                    matSuffix
                    mat-icon-button
                    (click)="searchUser(true)"
                  >
                    <mat-icon matPrefix>search</mat-icon>
                  </button>
                </mat-form-field>
              </div>
            </div>
            <div class="row">
              <div class="col-sm-6 col-12">
                <mat-form-field class="example-full-width" appearance="fill">
                  <mat-label>Nombre*</mat-label>
                  <input matInput autocomplete="off" formControlName="name" />
                </mat-form-field>
              </div>
              <div class="col-sm-6 col-12">
                <mat-form-field class="example-full-width" appearance="fill">
                  <mat-label>Apellido*</mat-label>
                  <input
                    matInput
                    autocomplete="off"
                    formControlName="last_name"
                  />
                </mat-form-field>
              </div>
            </div>

            <h4 class="h4">Información de contacto</h4>

            <div class="row mt-5">
              <div class="col-sm-6 col-12">
                <mat-form-field class="example-full-width" appearance="fill">
                  <mat-label>Correo*</mat-label>
                  <input matInput autocomplete="off" formControlName="email" />
                </mat-form-field>
              </div>

              <div class="col-sm-6 col-12">
                <mat-form-field class="example-full-width" appearance="fill">
                  <mat-label>Confirmar Correo*</mat-label>
                  <input
                    matInput
                    autocomplete="off"
                    [formControl]="confirm_email"
                    (keydown.Tab)="searchUser(true)"
                    (keyup.enter)="searchUser(true)"
                  />
                  <button
                    *ngIf="assistant_value.confirm_email"
                    type="button"
                    matSuffix
                    mat-icon-button
                    (click)="searchUser(true)"
                  >
                    <mat-icon matPrefix>search</mat-icon>
                  </button>
                </mat-form-field>
              </div>
            </div>
            <div class="row">
              <div class="col-sm-6 col-12">
                <mat-form-field class="example-full-width" appearance="fill">
                  <mat-label>Celular*</mat-label>
                  <input matInput autocomplete="off" formControlName="phone" />
                </mat-form-field>
              </div>
              <div class="col-sm-6 col-12">
                <mat-form-field class="example-full-width" appearance="fill">
                  <mat-label>Idioma*</mat-label>
                  <mat-select type="select" formControlName="language">
                    <mat-option value="es"> ESPAÑOL </mat-option>
                    <mat-option value="en"> INGLES </mat-option>
                    <mat-option value="pt"> PORTUGUES </mat-option>
                  </mat-select>
                </mat-form-field>
              </div>
            </div>

            <h4 class="h4">Información Ministerial</h4>
            <div class="row mt-5">
              <div class="col-sm-6 col-12">
                <mat-form-field class="example-full-width" appearance="fill">
                  <mat-label>Tipo de iglesia*</mat-label>
                  <mat-select
                    type="select"
                    formControlName="type_church"
                    [disabled]="disable_ministerial_info"
                  >
                    <mat-option value="MCI" (click)="resetMinisterialInfo()">
                      Iglesia MCI
                    </mat-option>
                    <mat-option value="G12" (click)="resetMinisterialInfo()">
                      Iglesia G12
                    </mat-option>
                    <mat-option value="OT" (click)="resetMinisterialInfo()">
                      Otra Iglesia
                    </mat-option>
                  </mat-select>
                </mat-form-field>
              </div>

              <div
                class="col-sm-6 col-12"
                *ngIf="
                  assistant_value?.type_church?.toString().toUpperCase() ==
                  'MCI'
                "
              >
                <mat-form-field class="example-full-width" appearance="fill">
                  <mat-label>Iglesia*</mat-label>
                  <mat-select type="select" formControlName="church">
                    <mat-option *ngFor="let church of churchs" [value]="church">
                      {{ church.name | uppercase }}
                    </mat-option>
                  </mat-select>
                </mat-form-field>
              </div>

              <!-- CASO DE IGLESIA DE TIPO MCI  -->

              <div
                class="col-sm-6 col-12"
                *ngIf="
                  assistant_value?.type_church?.toString().toUpperCase() ==
                  'MCI'
                "
              >
                <mat-form-field class="example-full-width" appearance="fill">
                  <mat-label>Red*</mat-label>
                  <mat-select type="select" formControlName="network">
                    <mat-option
                      [value]="'01'"
                      (click)="getPastors(assistant_value.network)"
                    >
                      Hombres
                    </mat-option>
                    <mat-option
                      [value]="'02'"
                      (click)="getPastors(assistant_value.network)"
                    >
                      Mujeres
                    </mat-option>
                  </mat-select>
                </mat-form-field>
              </div>
              <div
                class="col-sm-6 col-12"
                *ngIf="
                  assistant_value?.type_church?.toString().toUpperCase() ==
                  'MCI'
                "
              >
                <mat-form-field class="example-full-width" appearance="fill">
                  <mat-label>Pastor*</mat-label>
                  <mat-select type="select" formControlName="pastor">
                    <mat-option
                      *ngFor="let pastor of pastors"
                      [value]="pastor"
                      (click)="getLeaders(assistant_value.pastor)"
                    >
                      {{ pastor.name + " " + pastor.last_name | uppercase }}
                    </mat-option>
                  </mat-select>
                </mat-form-field>
              </div>

              <div
                class="col-sm-6 col-12"
                *ngIf="
                  assistant_value?.type_church?.toString().toUpperCase() ==
                  'MCI'
                "
              >
                <mat-form-field class="example-full-width" appearance="fill">
                  <mat-label>Lider*</mat-label>
                  <mat-select type="select" formControlName="leader">
                    <mat-option *ngFor="let leader of leaders" [value]="leader">
                      {{ leader.name + " " + leader.last_name | uppercase }}
                    </mat-option>
                  </mat-select>
                </mat-form-field>
              </div>

              <!-- FIN CASO DE IGLESIA DE TIPO MCI  -->

              <div
                class="col-sm-6 col-12"
                *ngIf="
                  assistant_value?.type_church?.toString().toUpperCase() &&
                  assistant_value?.type_church?.toString().toUpperCase() !=
                    'MCI'
                "
              >
                <mat-form-field class="example-full-width" appearance="fill">
                  <mat-label>Nombre de Iglesia*</mat-label>
                  <input
                    matInput
                    autocomplete="off"
                    formControlName="name_church"
                  />
                </mat-form-field>
              </div>

              <div
                class="col-sm-6 col-12"
                *ngIf="
                  assistant_value?.type_church?.toString().toUpperCase() &&
                  assistant_value?.type_church?.toString().toUpperCase() !=
                    'MCI'
                "
              >
                <mat-form-field class="example-full-width" appearance="fill">
                  <mat-label>Nombre de Pastor*</mat-label>
                  <input
                    matInput
                    autocomplete="off"
                    formControlName="name_pastor"
                  />
                </mat-form-field>
              </div>
            </div>
          </div>

          <h4 class="h4">Información del pago</h4>
          <div class="row mt-5" formGroupName="payment_information">
            <div class="col-sm-3">
              <mat-form-field appearance="fill" class="example-full-width">
                <mat-label>Moneda*</mat-label>
                <mat-select type="select" formControlName="currency">
                  <mat-option value="COP"> COP</mat-option>
                  <mat-option value="USD"> USD</mat-option>
                </mat-select>
              </mat-form-field>
            </div>
            <div class="col-sm-3">
              <mat-form-field appearance="fill" class="example-full-width">
                <mat-label>Forma de pago*</mat-label>
                <mat-select type="select" [formControl]="select_payment_getway">
                  <mat-option value="EFECTIVO"> EFECTIVO</mat-option>
                  <mat-option value="CREDITO/"> DATAFONO</mat-option>
                </mat-select>
              </mat-form-field>
            </div>
            <div class="col-sm-3 col-12">
              <mat-form-field
                class="example-full-width"
                appearance="fill"
                *ngIf="select_payment_getway.value == 'CREDITO/'"
              >
                <mat-label>Numero de aprobación*</mat-label>
                <textarea
                  matInput
                  maxlength="6"
                  [formControl]="description_of_changue"
                ></textarea>
              </mat-form-field>
            </div>
          </div>

          <div class="row d-flex" style="justify-content: flex-end">
            <div class="">
              <button
                type="button"
                (click)="modal.close()"
                class="
                  btn btn-sm btn-light-danger
                  font-weight-bolder
                  py-2
                  px-5
                  cursor-pointer
                "
              >
                Cancelar
              </button>

              <button
                class="
                  btn btn-sm btn-light-primary
                  font-weight-bolder
                  py-2
                  px-5
                  cursor-pointer
                  mx-3
                "
                type="submit"
              >
                <div class="spinner-border" role="status" *ngIf="isLoading">
                  <span class="sr-only">Loading...</span>
                </div>
                <div *ngIf="!isLoading">Registrar usuario</div>
              </button>
            </div>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>
